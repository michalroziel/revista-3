document.addEventListener("DOMContentLoaded",()=>{const e={navToggle:document.getElementById("mobile-nav-toggle"),navLinks:document.getElementById("section-links"),navIcon:document.getElementById("nav-toggle-icon"),sectionLinks:document.querySelectorAll(".section-link"),sections:document.querySelectorAll("h2[id]"),printButton:document.getElementById("print-cv")};e.navToggle&&e.navLinks&&e.navIcon&&(e.navToggle.addEventListener("click",()=>{const t=e.navToggle.getAttribute("aria-expanded")==="true";e.navToggle.setAttribute("aria-expanded",(!t).toString()),t?(e.navLinks.classList.remove("expanded"),e.navLinks.classList.add("hidden"),e.navLinks.style.maxHeight="0",e.navIcon.classList.remove("rotate-180")):(e.navLinks.classList.add("expanded"),e.navLinks.classList.remove("hidden"),e.navLinks.style.maxHeight=e.navLinks.scrollHeight+"px",e.navIcon.classList.add("rotate-180"))}),e.navLinks.addEventListener("keydown",t=>{t.key==="Escape"&&window.innerWidth<768&&(e.navToggle.setAttribute("aria-expanded","false"),e.navLinks.classList.add("hidden"),e.navIcon.classList.remove("rotate-180"),e.navToggle.focus())})),e.printButton&&e.printButton.addEventListener("click",()=>{const t=document.createElement("div");t.className="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-blue-700 text-white px-6 py-4 rounded-md shadow-xl z-50 transition-all duration-500 text-center max-w-md print:hidden",t.innerHTML=`
          <div class="font-bold text-lg mb-2">Opening Print Dialog...</div>
          <div class="text-sm mb-3">When the dialog opens, select "Save as PDF" for best results</div>
          <div class="text-xs">All styling and formatting will be preserved in the PDF</div>
        `,document.body.appendChild(t),setTimeout(()=>{t.style.display="none",window.print(),setTimeout(()=>{t.style.display="",setTimeout(()=>{t.style.opacity="0",t.style.transform="translate(-50%, -50%) scale(0.9)",setTimeout(()=>{t.parentNode&&document.body.removeChild(t)},500)},500)},500)},800)}),document.querySelectorAll(".section-link").forEach(t=>{t.addEventListener("click",n=>{n.preventDefault();const i=t.getAttribute("href")?.substring(1);if(i){const s=document.getElementById(i);if(s){s.classList.add("highlight-section"),setTimeout(()=>s.classList.remove("highlight-section"),2e3);const l=document.querySelector(".cv-nav")?.offsetHeight||0,a=s.getBoundingClientRect().top+window.pageYOffset-l-20;window.scrollTo({top:a,behavior:"smooth"}),document.querySelectorAll(".section-link").forEach(o=>{o.classList.remove("active"),o.classList.remove("text-blue-600","dark:text-blue-400","font-semibold"),o.classList.add("text-slate-600","dark:text-slate-300"),o.setAttribute("aria-current","false")}),t.classList.add("active"),t.classList.add("text-blue-600","dark:text-blue-400","font-semibold"),t.classList.remove("text-slate-600","dark:text-slate-300"),t.setAttribute("aria-current","true"),window.innerWidth<768&&e.navLinks.classList.contains("expanded")&&(e.navToggle.setAttribute("aria-expanded","false"),e.navLinks.classList.remove("expanded"),e.navLinks.classList.add("hidden"),e.navLinks.style.maxHeight="0",e.navIcon.classList.remove("rotate-180")),history.replaceState(null,null,`#${i}`)}}})});const r={root:null,rootMargin:"-80px 0px -40% 0px",threshold:0},d=new IntersectionObserver(t=>{t.forEach(n=>{if(n.isIntersecting){const i=n.target.getAttribute("id");i&&(history.replaceState(null,null,`#${i}`),document.querySelectorAll(".section-link").forEach(s=>{const a=s.getAttribute("href")===`#${i}`;s.classList.toggle("active",a),s.classList.toggle("text-blue-600",a),s.classList.toggle("dark:text-blue-400",a),s.classList.toggle("font-semibold",a),s.classList.toggle("text-slate-600",!a),s.classList.toggle("dark:text-slate-300",!a),s.setAttribute("aria-current",a?"true":"false")}))}})},r);if(e.sections.forEach(t=>d.observe(t)),location.hash){const t=location.hash.substring(1),n=document.querySelector(`.section-link[href="#${t}"]`);n&&(n.classList.add("active"),n.classList.add("text-blue-600","dark:text-blue-400","font-semibold"),n.classList.remove("text-slate-600","dark:text-slate-300"),n.setAttribute("aria-current","true"))}});
