---
import "../styles/global.css";

interface Props {
  languages?: string[];
  onLanguageChange?: (lang: string) => void;
}

const { languages = ["English", "German", "Polish", "French"] } = Astro.props;
---

<div class="language-selector">
  <label for="lang-select">Language:</label>
  <select id="lang-select" class="lang-dropdown">
    {languages.map((lang) => (
      <option value={lang.toLowerCase()}>{lang}</option>
    ))}
  </select>
</div>

<script is:inline>
  const select = document.getElementById("lang-select");

  if (select) {
    select.addEventListener("change", (e) => {
      const selectedLang = e.target.value;
      console.log("Selected language:", selectedLang);

      document.dispatchEvent(
        new CustomEvent("language-changed", { detail: { language: selectedLang } })
      );
    });
  }
</script>

<style>
  .language-selector {
    display: flex;
    align-items: center;
    gap: 12px;
    margin: 16px 0;
  }

  label {
    font-weight: 500;
    font-size: 0.95rem;
    color: var(--color-text);
  }

  .lang-dropdown {
    padding: 8px 12px;
    border: 1px solid var(--color-border);
    border-radius: 8px;
    background-color: var(--color-surface);
    color: var(--color-text);
    font-size: 0.95rem;
    cursor: pointer;
    transition: border-color 150ms ease;
  }

  .lang-dropdown:hover {
    border-color: var(--color-primary);
  }

  .lang-dropdown:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba(33, 128, 141, 0.4);
  }
</style>
